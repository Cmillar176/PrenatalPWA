<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<dom-module id="splash-page">
    <template>
        <style>
        :host {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #7E57C2;
                transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 1;
                color: var(--paper-purple-50);
                @apply(--layout);
                @apply(--layout-center-center);
            }
            
            :host([signed-in]) {
                opacity: 0;
                pointer-events: none;
            }
            
            :root {
                --paper-input-container-color: white;
                --paper-input-error: red;
                --paper-input-container-focus-color: #bf80ff;
                --paper-input-container-input-color: white;
            }
            
            #signin-form > paper-button {
                margin-top: 25px;
            }
            
            #signin-form {
                width: 222px;
            }
        }
        paper-button > * {
            vertical-align: middle;
            text-transform: none;
        }
        </style>
        <div id="signin-form">
            <paper-input id="email" label="Email"></paper-input>
            <paper-input id="password" label="Password" type="password"></paper-input>
            <paper-button on-tap="signIn" disabled="[[disabled]]">
                <iron-icon icon="account-circle"></iron-icon> <span>Sign in</span> </paper-button>
        </div>
        <firebase-auth id="auth" app-name="PrenatalPWA" provider="google" signed-in="{{signedIn}}" user="{{user}}"> </firebase-auth>
    </template>
    <script>
        Polymer({
            is: 'splash-page'
            , properties: {
                disabled: {
                    type: Boolean
                    , reflectToAttribute: true
                    , value: false
                }
                , signedIn: {
                    type: Boolean
                    , reflectToAttribute: true
                    , value: false
                }
                , online: {
                    type: Boolean
                    , value: true
                }
            }
            , signIn: function () {
                email = "cailin_millar@hotmail.co.uk";
                password = "test123";
                if ((this.$.email.value == email) && (this.$.password.value == password)) {
                    this.$.auth.signInWithEmailAndPassword(email, password);
                }
                else {
                    alert('Please insert correct email address or password');
                }
            }
            , signOut: function () {
                this.fire('sign-out', null);
            }
        });
    </script>
</dom-module>